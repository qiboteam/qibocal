Readout optimization
====================

Qibocal provides different protocols to improve the readout pulse parameters by optimizing the assignment fidelity.

Resonator Amplitude
-------------------

The `resonator_amplitude` protocol improves the readout amplitude by optimizing the assignment fidelity.

Parameters
^^^^^^^^^^

.. autoclass:: qibocal.protocols.readout_optimization.resonator_amplitude.ResonatorAmplitudeParameters
	:noindex:


Example
^^^^^^^

It follows an example runcard of the resonator amplitude routine with the plot
generated in the report.

.. code-block:: yaml

    - id: resonator_amplitude
      operation: resonator_amplitude
      parameters:
          amplitude_step: 0.0005
          amplitude_start: 0.001
          amplitude_stop: 0.005

As shown in the picture below, the protocol sweeps the readout amplitude and evaluates the errors probability.

.. image:: readout_amplitude.png


Resonator Frequency
-------------------

The `resonator_frequency` protocol performs a sweep of the readout frequency to maximize assignment fidelity.


Parameters
^^^^^^^^^^

.. autoclass:: qibocal.protocols.readout_optimization.resonator_frequency.ResonatorFrequencyParameters
	:noindex:


Example
^^^^^^^

In the following we show a possible runcard for the optimization of the resonator frequency together with expected output plot.

.. code-block:: yaml

    - id: resonator_frequency
      operation: resonator_frequency
      parameters:
        freq_width: 1_000_000
        freq_step: 100_000

.. image:: frequency_optimization.png



Resonator Optimization
----------------------

In addition to this metric, the protocol also computes the quantum non-demolition-ness (QND) of the measurement, which serves to evaluate measurement-induced state disturbance.
To capture leakage outside the computational basis the protocol includes the computation of QND with an additional :math:`\pi` pulse.
Readout parameters are then updated based on the configuration that yields the highest assignment fidelity.


Parameters
^^^^^^^^^^

.. autoclass:: qibocal.protocols.readout_optimization.resonator_optimization.ResonatorOptimizationParameters
	:noindex:


Example
^^^^^^^

A possible runcard for the resonator optimization protocol could be:

.. code-block:: yaml

    - id: resonator optimization
      operation: resonator_optimization
      parameters:
        freq_width: 3_000_000
        freq_step: 125_000
        amplitude_step: 0.00025
        amplitude_start: 0.00025
        amplitude_stop: 0.0085
        delay: 1000

The plot generated by the report should be similar to the following one:

.. image:: resonator_optimization.png
